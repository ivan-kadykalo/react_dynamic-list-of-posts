(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(11),s=n.n(c),a=n(3),r=n(1),o=(n(17),n(18),n(4)),i=n(2),l=n.n(i),u="https://mate.academy/students-api",j=function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=(n(20),n(0)),d=function(){return Object(b.jsx)("div",{className:"Loader",children:Object(b.jsx)("div",{className:"Loader__content"})})},m=(n(22),n(12)),O=n.n(m),p=function(e){var t=e.post,n=e.onSelectPostId,c=e.selectedPostId===t.id;return Object(b.jsxs)("li",{className:"PostItem",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"[User #".concat(t.userId,"]: ")}),t.title]}),Object(b.jsx)("button",{type:"button",className:O()("PostItem__button","button",{"PostItem__user-button":c}),onClick:function(){n(t.id)},children:c?"Close":"Open"})]})},h=(n(23),function(e){var t=e.selectedUserId,n=e.onSelectPostId,c=e.selectedPostId,s=Object(r.useState)([]),i=Object(a.a)(s,2),m=i[0],O=i[1];Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("".concat(u,"/posts"));case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var h=Object(r.useMemo)((function(){return 0===t?m:m.filter((function(e){return e.userId===t}))}),[t,m]);return Object(b.jsxs)("div",{className:"PostsList",children:[Object(b.jsx)("h2",{children:"Posts:"}),Object(b.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:m.length>0?h.map((function(e){return Object(b.jsx)(p,{post:e,onSelectPostId:n,selectedPostId:c},e.id)})):Object(b.jsx)(d,{})})]})}),f=n(10),x=function(e){return j("".concat(u,"/comments?postId=").concat(e))},v=function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=n(7),N=n(5),y=(n(24),function(e){var t=e.selectedPostId,n=e.handleAddComment,c={postId:t,name:"",email:"",body:""},s={name:"",email:"",body:""},o=Object(r.useState)(c),i=Object(a.a)(o,2),l=i[0],u=i[1],j=Object(r.useState)(s),d=Object(a.a)(j,2),m=d[0],O=d[1],p=Object(r.useCallback)((function(e){var n=e.target,c=n.value,s=n.name;u((function(e){var n;return Object(N.a)(Object(N.a)({},e),{},(n={},Object(_.a)(n,s,c),Object(_.a)(n,"postId",t),n))}))}),[t,l]);return Object(b.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),O(Object(N.a)({},s)),l.name.trim()||O((function(e){return Object(N.a)(Object(N.a)({},e),{},{name:"Enter title!"})})),l.body.trim()||O((function(e){return Object(N.a)(Object(N.a)({},e),{},{body:"Enter comment!"})})),l.email.trim()||O((function(e){return Object(N.a)(Object(N.a)({},e),{},{email:"Enter email!"})}));var t=Object.values(l).every((function(e){return e})),a=Object.values(m).some((function(e){return e}));t&&a&&(n(l),u(c))},children:[Object(b.jsxs)("div",{className:"form-field",children:[Object(b.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",onChange:p,value:l.name}),m.name&&Object(b.jsx)("p",{className:"error-message",children:m.name})]}),Object(b.jsxs)("div",{className:"form-field",children:[Object(b.jsx)("input",{type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",onChange:p,value:l.email}),m.email&&Object(b.jsx)("p",{className:"error-message",children:m.email})]}),Object(b.jsxs)("div",{className:"form-field",children:[Object(b.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",onChange:p,value:l.body}),m.body&&Object(b.jsx)("p",{className:"error-message",children:m.body})]}),Object(b.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),P=(n(25),function(e){var t=e.comment,n=e.handleDeleteComment;return Object(b.jsxs)("li",{className:"PostDetails__list-item",children:[Object(b.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return n(t.id)},children:"X"}),Object(b.jsx)("p",{children:t.body})]})}),C=(n(26),function(e){var t=e.selectedPostId,n=Object(r.useState)(null),c=Object(a.a)(n,2),s=c[0],i=c[1],m=Object(r.useState)([]),O=Object(a.a)(m,2),p=O[0],h=O[1],_=Object(r.useState)(!0),N=Object(a.a)(_,2),C=N[0],I=N[1],w=Object(r.useState)(!1),S=Object(a.a)(w,2),k=S[0],g=S[1],D=Object(r.useCallback)(Object(o.a)(l.a.mark((function e(){var n,c,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(o=t,j("".concat(u,"/posts/").concat(o))),x(t)]);case 2:return n=e.sent,c=Object(a.a)(n,2),s=c[0],r=c[1],e.next=8,i(s);case 8:return e.next=10,h(r);case 10:g(!1);case 11:case"end":return e.stop()}var o}),e)}))),[t]);Object(r.useEffect)((function(){i(null),h([]),D()}),[t]);var A=Object(r.useCallback)((function(){I((function(e){return!e}))}),[]),E=Object(r.useCallback)(function(){var e=Object(o.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,v(t);case 3:return n=e.sent,e.next=6,[].concat(Object(f.a)(p),[n]);case 6:c=e.sent,h(c),g(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]),L=Object(r.useCallback)(function(){var e=Object(o.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,c=t,void fetch("".concat(u,"/comments/").concat(c),{method:"DELETE"});case 3:n=Object(f.a)(p).filter((function(e){return e.id!==t})),h(n),g(!1);case 6:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);return Object(b.jsxs)("div",{className:"PostDetails",children:[Object(b.jsx)("h2",{children:"Post details:"}),s?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("section",{className:"PostDetails__post",children:Object(b.jsx)("p",{children:s.body})}),p.length>0&&Object(b.jsxs)("section",{"data-cy":"postDetails",className:"PostDetails__comments",children:[Object(b.jsx)("button",{onClick:A,type:"button",className:"button",children:"".concat(C?"Hide":"Show"," ").concat(p.length," comment").concat(p.length>1?"s":"")}),C&&Object(b.jsx)("ul",{className:"PostDetails__list",children:p.map((function(e){return Object(b.jsx)(P,{comment:e,handleDeleteComment:L},e.id)}))})]}),k&&Object(b.jsx)(d,{}),Object(b.jsx)("section",{children:Object(b.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(b.jsx)(y,{selectedPostId:t,handleAddComment:E})})})]}):Object(b.jsx)(d,{})]})}),I=function(){var e=Object(r.useState)(0),t=Object(a.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(null),o=Object(a.a)(s,2),i=o[0],l=o[1],u=Object(r.useCallback)((function(e){var t=e.target.value;c(+t)}),[]),j=Object(r.useCallback)((function(e){l(e===i?null:e)}),[i]);return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:"App__header",children:Object(b.jsxs)("label",{children:["Select a user: \xa0",Object(b.jsxs)("select",{className:"App__user-selector",value:String(n),onChange:u,children:[Object(b.jsx)("option",{value:"0",children:"All users"}),Object(b.jsx)("option",{value:"1",children:"Leanne Graham"}),Object(b.jsx)("option",{value:"2",children:"Ervin Howell"}),Object(b.jsx)("option",{value:"3",children:"Clementine Bauch"}),Object(b.jsx)("option",{value:"4",children:"Patricia Lebsack"}),Object(b.jsx)("option",{value:"5",children:"Chelsey Dietrich"}),Object(b.jsx)("option",{value:"6",children:"Mrs. Dennis Schulist"}),Object(b.jsx)("option",{value:"7",children:"Kurtis Weissnat"}),Object(b.jsx)("option",{value:"8",children:"Nicholas Runolfsdottir V"}),Object(b.jsx)("option",{value:"9",children:"Glenna Reichert"}),Object(b.jsx)("option",{value:"10",children:"Leanne Graham"})]})]})}),Object(b.jsxs)("main",{className:"App__main",children:[Object(b.jsx)("div",{className:"App__sidebar",children:Object(b.jsx)(h,{selectedUserId:n,onSelectPostId:j,selectedPostId:i})}),Object(b.jsx)("div",{className:"App__content",children:i&&Object(b.jsx)(C,{selectedPostId:i})})]})]})};s.a.render(Object(b.jsx)(I,{}),document.getElementById("root"))}],[[27,1,2]]]);
//# sourceMappingURL=main.7c09c271.chunk.js.map